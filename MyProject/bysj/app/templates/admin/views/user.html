<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../static/assets/css/layui.css">
    <link rel="stylesheet" href="../../static/assets/css/view.css"/>
    <link rel="icon" href="../../static/favicon.ico">
    <title>管理后台</title>
</head>
<body class="layui-view-body">
<div class="layui-content">
    <div class="layui-page-header">
        <div class="pagewrap">
                <span class="layui-breadcrumb">
                  <a href="">首页</a>
                  <a href="">用户</a>
                  <a><cite>用户组</cite></a>
                </span>
            <h2 class="title">用户组</h2>
        </div>
    </div>
    <div class="layui-row">
        <div class="layui-card">
            <div class="layui-card-body">
                <div class="form-box">
                    <div class="layui-form layui-form-item">
                        <div class="layui-inline">
                            <div class="layui-form-mid">用户名:</div>
                            <div class="layui-input-inline" style="width: 100px;">
                                <input id="find_name" type="text" autocomplete="off" class="layui-input">
                            </div>
                            
                            <!-- <div class="layui-form-mid">邮箱:</div>
                            <div class="layui-input-inline" style="width: 100px;">
                                <input type="text" autocomplete="off" class="layui-input">
                            </div> -->
                            <!-- <button id="find_user" class="layui-btn layui-btn-blue">查询</button> -->
                            <button id="del_user" class="layui-btn layui-btn-red">删除</button>
                        </div>
                    </div>
                    <a href="http://127.0.0.1:5000/admin/user/form" class="layui-btn layui-btn-blue">
                        <i class="layui-icon">&#xe654;</i>新增
                    </a>

                    <table id="demo"></table>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../../static/assets/layui.all.js"></script>
<script src="../../static/js/jquery.min.js"></script>
<script>
    /*
    $('#find_user').click(function(){
        $.ajax({
            type:'post',
            url:'http://127.0.0.1:500/admin/user/find',
            data:JSON.stringify({
                'username':$('find_name').val(),
            }),
            dataType:'json',
            contentType:'application/json',
            success:function(data){
                if(data.code == 2){

                }
                else{
                    alert(data.error);
                }
            },
            error:function(){
                console.log('123456');
            },
        });
    });
    */
    $('#del_user').click(function(){
        $.ajax({
            type:'delete',
            url:'http://127.0.0.1:5000/admin/user/home',
            data:JSON.stringify({
                'username':$('#find_name').val(),
            }),
            dataType:'json',
            contentType:'application/json',
            success:function(data){
                if(data.code == 200){
                    alert('删除成功!');
                    window.location.href = 'http://127.0.0.1:admin/user/home';
                }
                else{
                    alert(data.error);
                }
            },
            error:function(){
                console.log('123456');
            },
        });
    });
</script>
<script>
    var element = layui.element;
    var table = layui.table;
    var form = layui.form;
    //展示已知数据
    table.render({
        elem: '#demo',
        cols: [[ //标题栏
            {field: 'id', title: 'ID', sort: true},
            {field: 'username', title: '用户名'},
            // {field: 'realname', title: '真实姓名', width: 150},
            //{field: 'sex', title: '性别', width: 80},
            {field: 'sign', title: '签名'},
            {field: 'phone', title: '手机号'},
            {field: 'email', title: '邮箱'},
            {field: 'address', title: '地址'},
            {field: 'is_active', title: '是否激活'}
        ]],
        //数据接口
        url: 'http://127.0.0.1:5000/admin/user/home', 
        method:'post',
        contentType: 'application/json',
        skin: 'line', //表格风格
        even: true,
        page: true, //是否显示分页
        limits: [5, 7, 10],
        limit: 5, //每页默认显示的数量
    });
</script>
</body>
</html>