<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../../static/assets/css/layui.css">
    <link rel="stylesheet" href="../../static/assets/css/view.css"/>
    <title></title>
</head>
<body class="layui-view-body">
    <div class="layui-content">
        <div class="layui-row">
            <div class="layui-card">
                <div class="layui-card-header">用户</div>
                <div class="layui-form layui-card-body">
                  <div class="layui-form-item">
                    <label class="layui-form-label">用户名</label>
                    <div class="layui-input-block">
                      <input id="user_name" type="text" name="title" required  lay-verify="required" placeholder="请输入用户名" autocomplete="off" class="layui-input">
                    </div>
                  </div>
                  <div class="layui-form-item">
                    <label class="layui-form-label">密码</label>
                    <div class="layui-input-inline">
                      <input id="user_pwd" type="password" name="password" required lay-verify="required" maxlength="13" placeholder="请输入密码" autocomplete="off" class="layui-input">
                    </div>
                  </div>
                  <div class="layui-form-item">
                    <label class="layui-form-label">收货地址</label>
                    <div class="layui-input-block">
                      <input id="user_address" type="text" name="title" required  lay-verify="required" placeholder="请输入您的收货地址" autocomplete="off" class="layui-input">
                    </div>
                  </div>
                  <div class="layui-form-item">
                    <label class="layui-form-label">手机号</label>
                    <div class="layui-input-block">
                      <input id="user_phone" type="number" name="phone" maxlength="11" required  lay-verify="required" placeholder="请输入您的手机号" autocomplete="off" class="layui-input">
                    </div>
                  </div>
                  <div class="layui-form-item">
                    <label class="layui-form-label">邮箱</label>
                    <div class="layui-input-block">
                      <input id="user_email" type="email" name="email" required  lay-verify="required" placeholder="请输入您的邮箱" autocomplete="off" class="layui-input">
                    </div>
                  </div>
                  <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">签名编辑</label>
                    <div class="layui-input-block">
                      <textarea id="user_sign" name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>
                    </div>
                  </div>
                  <div class="layui-form-item">
                    <div class="layui-input-block">
                      <button id="user_submit" class="layui-btn layui-btn-blue" lay-submit lay-filter="formDemo">立即提交</button>
                      <button id="user_reset" type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../../static/assets/layui.all.js"></script>
    <script src="../../static/js/jquery.min.js"></script>
    <script>
      //var form = layui.form
        //,layer = layui.layer;
        function reset(){
          $('#user_name').val('');
          $('#user_pwd').val('');
          $('#user_address').val('');
          $('#user_phone').val('');
          $('#user_email').val('');
          $('#user_sign').val('');
        };
        $('#user_reset').click(reset);
        $('#user_submit').click(function(){
          $.ajax({
            type:'post',
            data:JSON.stringify({
              'name':$('#user_name').val(),
              'pwd':$('#user_pwd').val(),
              'address':$('#user_address').val(),
              'phone':$('#user_phone').val(),
              'email':$('#user_email').val(),
              'sign':$('#user_sign').val(),
            }),
            url:'http://127.0.0.1:5000/admin/user/form',
            contentType:'application/json',
            dataType:'json',
            success:function(data){
                if(data.code == 200){
                  if (confirm("添加成功!是否查看所有数据?")) {
                      window.location.href = 'http://127.0.0.1:5000/admin/user/home';
                  }else{
                    reset();
                  }
                }
                else{
                  alert(data.error);
                }
            },
            error:function(){
              console.log('error')
            },
          });
        });
    </script>
</body>
</html>